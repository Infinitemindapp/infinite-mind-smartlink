<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Infinite Mind — Redirect</title>
  <meta name="description" content="Redirecting you to Infinite Mind…" />
  <style>
    html, body {
      height: 100%; margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:#fafafa;
    }
    .wrap {
      display:flex; align-items:center; justify-content:center;
      height:100%; text-align:center; padding:24px;
    }
    .card {
      max-width:560px; width:100%;
      border:1px solid #eee; border-radius:16px;
      padding:24px; background:#fff;
      box-shadow:0 10px 24px rgba(0,0,0,0.05);
    }
    .logo {
      display:block;
      margin:0 auto 20px;
      max-width:100%;
      width:240px;       /* adjust as needed */
      height:auto;       /* let the image keep its aspect ratio */
      object-fit:contain;
      border-radius:12px;
    }
    .headline { font-size:1.5rem; font-weight:600; margin:8px 0 12px; }
    .spinner {
      width:32px; height:32px;
      border:4px solid #ddd; border-top-color:#333;
      border-radius:50%; margin:12px auto 8px;
      animation:spin 1s linear infinite;
    }
    @keyframes spin { to { transform:rotate(360deg); } }
    @media (prefers-reduced-motion: reduce) {
      .spinner { animation: none; border-top-color:#999; }
    }
    .cta {
      display:inline-block; margin-top:10px; text-decoration:none;
      padding:8px 12px; border-radius:8px; border:1px solid #ddd; color:#333;
    }
    .muted { color:#666; font-size:12px; margin-top:12px; }
  </style>
  <script>
    // ===== Config =====
    const IOS_APP_STORE_URL = "https://apps.apple.com/app/id1544288085";
    const ANDROID_PLAY_STORE_URL = "https://play.google.com/store/apps/details?id=io.infinitemind.imapp";
    const WEBSITE_FALLBACK_URL = "https://infinitemind.io";
    const IMAGE_URL = "https://infinitemind.io/wp-content/uploads/2025/09/Untitled-design-27.png"; // your image

    // ===== Helpers =====
    function isAndroid(){ return /android/i.test(navigator.userAgent||navigator.vendor||window.opera); }
    function isIOS(){ return /iPad|iPhone|iPod/.test(navigator.userAgent||navigator.vendor||window.opera) && !window.MSStream; }

    function withUtm(url){
      const q = window.location.search;
      if(!q || q === "?") return url;
      try{
        const u = new URL(url);
        const incoming = new URLSearchParams(q);
        incoming.forEach((v,k)=>u.searchParams.set(k,v));
        return u.toString();
      }catch{ return url + q; }
    }

    function resolveDestination(){
      const p = new URLSearchParams(location.search);
      const override = (p.get("dest")||"").toLowerCase();
      if(override === "ios") return IOS_APP_STORE_URL;
      if(override === "android") return ANDROID_PLAY_STORE_URL;
      if(override === "web") return WEBSITE_FALLBACK_URL;
      if(isAndroid()) return ANDROID_PLAY_STORE_URL;
      if(isIOS()) return IOS_APP_STORE_URL;
      return WEBSITE_FALLBACK_URL;
    }

    function setup(){
      // Image + fallback
      const img = document.getElementById("logo");
      img.src = IMAGE_URL;
      img.onerror = () => { 
        img.src = "https://infinitemind.io/wp-content/uploads/2023/06/cropped-favicon-512.png"; 
      };

      // Manual link and auto-redirect
      const finalUrl = withUtm(resolveDestination());
      const manual = document.getElementById("manual-link");
      manual.href = finalUrl;

      // Short delay so users see the page
      setTimeout(()=>window.location.replace(finalUrl), 2000);
    }

    document.addEventListener("DOMContentLoaded", setup);
  </script>
</head>
<body>
  <div class="wrap">
    <div class="card" role="status" aria-live="polite">
      <img id="logo" class="logo" src="" alt="Infinite Mind Logo" referrerpolicy="no-referrer" />
      <div class="headline">Almost there…</div>
      <div class="spinner" aria-hidden="true"></div>
      <a id="manual-link" class="cta" href="#">Continue now</a>
      <div class="muted">If nothing happens in a couple seconds, tap “Continue now”.</div>
    </div>
  </div>
</body>
</html>


